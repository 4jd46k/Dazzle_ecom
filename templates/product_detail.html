{% extends "base.html" %}
{% block title %}DAZZLE | PRODUCT DETAIL{% endblock %}
{% block content %}
{% load static %}
<style>
    .cursor-pointer {
    cursor: pointer;
    }
</style>

<div class="container mt-5">
    <div class="row">
        <div class="col-md-6 col-12 col-sm-12 col-lg-6">
            <div class="row mb-3">
                <img src="{{variant.cover_image.url}}" alt="{{variant.cover_image}}" style="width: 80%;">
                <div class="row">
                    {% for image in variant.variant_images.all %}
                        <div class="col-md-6 px-3 my-4">
                            <div class="card border-0 ">
                                <div class="embed-responsive embed-responsive-1by1">
                                    <img src="{{ image.extra_images.url }}" class="card-img-top embed-responsive-item img-fluid" alt="Image">
                                </div>
                                <div class="card-body">
                                    
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                

            </div>
        </div>
        <div class="col-md-6">
            <h3>{{ variant.product.name }} 
        {% if is_in_wishlist %}
            <a href="{% url 'remove_from_wish' pslug=variant.product.slug vslug=variant.slug %}" style="position: absolute; top: 15px; right: 20px;">
                <i class="fa fa-heart" aria-hidden="true" style="color: red;"></i>
            </a>
        {% else %}
            <a href="{% url 'add_to_wish' pslug=variant.product.slug vslug=variant.slug %}" style="position: absolute; top: 15px; right: 20px;">
                <i class="far fa-heart"></i>
            </a>
        {% endif %}
            </h3>
            
            <div>
                <h6> Colour : {{ variant.color_name }}</h6>
            </div>
            {% for variant in variant.product.variants.all %}
            
            <a href="{% url 'product_detail' pslug=variant.product.slug vslug=variant.slug %}"> 
                <input type="color" id="favcolor" name="favcolor" value="{{ variant.color }}" class="custom-color-input cursor-pointer" onclick="openProductDetail()" readonly>
            </a>
            {% endfor %}  
            <div class="my-3">
            {% if variant.actual_price == variant.selling_price %}
                            <strong style="font-size: 14px;">
                                ₹
                                {{ variant.selling_price }}
                            </strong>
                        {% else %}
                            <strong style="font-size: 14px;" class="mx-1">
                                ₹
                                {{ variant.selling_price }}
                            </strong>
                            <strong class="text-decoration-line-through" style="font-size: 10px;">
                                MRP : ₹
                                <span>{{ variant.actual_price }}</span>
                            </strong>
                        {% endif %}
                        </div>
                        {% if is_in_cart %}
                        <a href="{% url 'cart' %}" class="btn btn-outline-primary">Go to Cart</a>
                        
                        {% else %}
                        {% if variant.stock > 0 %}
                        <a href="{% url 'add_to_cart' pslug=variant.product.slug vslug=variant.slug %}" class="btn btn-outline-dark">Add to Cart</a>
                        {% else %}
                        <button type="button" class="btn btn-outline-dark" disabled>Out of Stock</button>
                        {% endif %}
                        <p class="mt-3">{{ variant.product.description }}</p>
                        {% endif %}
                    </div>
    </div>
</div>
<script>
    function openProductDetail() {
        // Get the URL using Django template tag
        var url = "{% url 'product_detail' pslug=variant.product.slug vslug=variant.slug %}";
        
        // Redirect to the URL
        window.location.href = url;
    }
</script>
{% endblock %}
