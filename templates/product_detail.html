{% extends "base.html" %}
{% block title %}DAZZLE | PRODUCT DETAIL{% endblock %}
{% block content %}
{% load static %}
<style>
    .cursor-pointer {
    cursor: pointer;
    }
</style>

<div class="container mt-5">
    <div class="row">
        <div class="col-md-6 col-12 col-sm-12 col-lg-6">
            <div class="row mb-3">
                <img src="{{variant.cover_image.url}}" alt="{{variant.cover_image}}" style="width: 80%;">
                <div class="row">
                    {% for image in variant.variant_images.all %}
                        <div class="col-md-6 px-3 my-4">
                            <div class="card border-0 ">
                                <div class="embed-responsive embed-responsive-1by1">
                                    <img src="{{ image.extra_images.url }}" class="card-img-top embed-responsive-item img-fluid" alt="Image">
                                </div>
                                <div class="card-body">
                                    
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                

            </div>
        </div>
        <div class="col-md-6">
            <h3>{{ variant.product.name }} 
        {% if is_in_wishlist %}
            <a href="{% url 'remove_from_wish' pslug=variant.product.slug vslug=variant.slug %}" style="position: absolute; top: 15px; right: 20px;">
                <i class="fa fa-heart" aria-hidden="true" style="color: red;"></i>
            </a>
        {% else %}
            <a href="{% url 'add_to_wish' pslug=variant.product.slug vslug=variant.slug %}" style="position: absolute; top: 15px; right: 20px;">
                <i class="far fa-heart"></i>
            </a>
        {% endif %}
            </h3>
            
            <div>
                <h6> Colour : {{ variant.color_name }}</h6>
            </div>
            {% for variant in variant.product.variants.all %}
            
            <a href="{% url 'product_detail' pslug=variant.product.slug vslug=variant.slug %}"> 
                <input type="color" id="favcolor" name="favcolor" value="{{ variant.color }}" class="custom-color-input cursor-pointer" onclick="openProductDetail()" readonly>
            </a>
            {% endfor %}  
            <div class="my-3">
            {% if variant.actual_price == variant.selling_price %}
                            <strong style="font-size: 14px;">
                                ₹
                                {{ variant.selling_price }}
                            </strong>
                        {% else %}
                            <strong style="font-size: 14px;" class="mx-1">
                                ₹
                                {{ variant.selling_price }}
                            </strong>
                            <strong class="text-decoration-line-through" style="font-size: 10px;">
                                MRP : ₹
                                <span>{{ variant.actual_price }}</span>
                            </strong>
                        {% endif %}
                        </div>
                        {% if variant.stock > 0 %}
                        <a href="{% url 'add_to_cart' pslug=variant.product.slug vslug=variant.slug %}" class="btn btn-outline-dark">Add to Cart</a>
                        <button type="button" class="btn btn-outline-success">Buy Now</button>
                        {% else %}
                        <button type="button" class="btn btn-outline-dark" disabled>Out of Stock</button>
                        {% endif %}
                        <p class="mt-3">{{ variant.product.description }}</p>
                        <a href=""><p class="mt-3 text-light"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M352 224c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96c0 4 .2 8 .7 11.9l-94.1 47C145.4 170.2 121.9 160 96 160c-53 0-96 43-96 96s43 96 96 96c25.9 0 49.4-10.2 66.6-26.9l94.1 47c-.5 3.9-.7 7.8-.7 11.9c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-25.9 0-49.4 10.2-66.6 26.9l-94.1-47c.5-3.9 .7-7.8 .7-11.9s-.2-8-.7-11.9l94.1-47C302.6 213.8 326.1 224 352 224z"/></svg> Share</p></a>
                    </div>
    </div>
</div>
<script>
    function openProductDetail() {
        // Get the URL using Django template tag
        var url = "{% url 'product_detail' pslug=variant.product.slug vslug=variant.slug %}";
        
        // Redirect to the URL
        window.location.href = url;
    }
</script>
{% endblock %}
